# -*- coding: utf-8 -*-
"""Practice Project: Titanic Survival Prediction.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/10fvzbdxYX0N4oC8GqPw1hAZQse49jR0q
"""

import numpy as np
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
from sklearn.datasets import load_iris
from sklearn.model_selection import train_test_split,GridSearchCV,cross_val_score,StratifiedKFold
from sklearn.preprocessing import StandardScaler, OneHotEncoder
from sklearn.decomposition import PCA
from sklearn.neighbors import KNeighborsClassifier
from sklearn.pipeline import Pipeline
from sklearn.compose import ColumnTransformer
from sklearn.impute import SimpleImputer
from sklearn.ensemble import RandomForestClassifier
from sklearn.linear_model import LogisticRegression
from sklearn.metrics import confusion_matrix, classification_report, ConfusionMatrixDisplay

"""Titanic Passenger data set
We'll be working with the Titanic passenger dataset to build a classification model to predict whether a passenger survied the sinking of the Titanic.
Here is the data dictionary:

![Titanic.png](data:image/png;base64,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)
"""

titanic = sns.load_dataset('titanic')

titanic.head(5)

"""**Features to drop**

deck has a lot of missing values so we'll drop it. age has quite a few missing values as well. Although it could be, embarked and embark_town don't seem relevant so we'll drop them as well. It's unclear what alive refers to so we'll ignore it.

**Target**
survived is our target class variable.


"""

features = ['pclass','sex',	'age','sibsp','parch','fare','class', 'who', 'adult_male', 'alone']
target = ['survived']
x = titanic[features]
y = titanic[target]

"""**Exercise 1. How balanced are the classes?**"""

y.value_counts()

"""**Exercise 2. Split the data into training and testing sets
Don't forget to consider imbalance in the target**
"""

x_train,x_test,y_train,y_test = train_test_split(x,y,test_size = 0.2,stratify = y, random_state = 42)

"""**Define preprocessing transformers for numerical and categorical features**

**Automatically detect numerical and categorical columns and assign them to separate numeric and categorical features**
"""

numerical_features = x_train.select_dtypes(include = ['number']).columns.tolist()
categorical_features = x_train.select_dtypes(include = ['object','category']).columns.tolist()

"""**Define separate preprocessing pipelines for both feature types**"""

numerical_transformer = Pipeline(steps = [('imputer', SimpleImputer(strategy = 'median')),('scaler', StandardScaler())])
#Scaler → Standardizes the values (subtract mean, divide by standard deviation) → makes all numerical features have similar scale (important for models like SVM, Logistic Regression, KNN).
categorical_transformer = Pipeline(steps = [('imputer', SimpleImputer(strategy = 'most_frequent')),('onehot',OneHotEncoder(handle_unknown = 'ignore'))])
#This is applied to categorical columns:

#Imputer → Replaces missing values with the most frequent (mode) category.
#Example: if "Gender" column has missing values, they will be replaced by "Male" if Male is the most common.

#OneHotEncoder → Converts categorical values into dummy variables (0/1 columns).

#handle_unknown='ignore' ensures that if the test set has a new unseen category, it won’t throw an error; it will just ignore it.

"""**Combine the transformers into a single column transformer**

We'll use the sklearn "column transformer" estimator to separately transform the features, which will then concatenate the output as a single feature space, ready for input to a machine learning estimator.
"""

preprocessor = ColumnTransformer(transformers = [('num',numerical_transformer,numerical_features),('cat',categorical_transformer,categorical_features)])

"""**Create a model pipeline**

Now let's complete the model pipeline by combining the preprocessing with a Random Forest classifier
"""

pipeline = Pipeline(steps = [('preprocessor', preprocessor),('classifier', RandomForestClassifier(random_state = 42))])

"""**Define a parameter grid**

We'll use the grid in a cross validation search to optimize the model
"""

param_grid = {'classifier__n_estimators':[50,100],
              'classifier__max_depth':[None,10,20],
              'classifier__min_samples_split':[2,5]
}

"""Meaning of the parameters:

n_estimators → Number of trees in the forest

50 trees vs 100 trees

More trees = better accuracy (usually) but slower training.

max_depth → Maximum depth of each tree

None → tree grows fully until all leaves are pure.

10 or 20 → restricts depth (prevents overfitting).

min_samples_split (typo: you wrote min_sample_split)

Minimum number of samples required to split an internal node.

2 → split if at least 2 samples.

5 → stricter splitting, reduces overfitting.

**Perform grid search cross-validation and fit the best model to the training data**
"""

cv = StratifiedKFold(n_splits = 5, shuffle = True)
#n_splits=5 → splits your dataset into 5 folds.
#Training happens on 4 folds, testing on the remaining 1, repeated 5 times.
#shuffle=True → shuffles the dataset before splitting (helps avoid bias in ordered data).

"""**Exercise 3. Train the pipeline model**"""

model = GridSearchCV(estimator = pipeline, cv = cv, param_grid = param_grid, scoring = 'accuracy', verbose = 2)

model.fit(x_train,y_train)

"""**Exercise 4. Get the model predictions from the grid search estimator on the unseen data**"""

y_pred = model.predict(x_test)

print(classification_report(y_test,y_pred))

"""**Exercise 5. Plot the confusion matrix**"""

conf_matrix = confusion_matrix(y_test,y_pred)

plt.figure()
sns.heatmap(conf_matrix,annot = True, cmap = 'Blues', fmt = 'd')

plt.title('Titanic Classification Confusion Matrix')
plt.xlabel('Predicted')
plt.ylabel('Actual')
plt.tight_layout()
plt.show()

"""**Feature importances**

Let's figure out how to get the feature importances of our overall model. You'll need to know how to do this for your final project.
First, to obtain the categorical feature importances, we have to work our way backward through the modelling pipeline to associate the feature importances with their one-hot encoded input features that were transformed from the original categorical features.

We don't need to trace back through the pipeline for the numerical features, because we didn't transfrom them into new ones in any way.
Remember, we went from categorical features to one-hot encoded features, using the 'cat' column transformer.

Here's how you trace back through the trained model to access the one-hot encoded feature names:
"""

model.best_estimator_['preprocessor'].named_transformers_['cat'].named_steps['onehot'].get_feature_names_out(categorical_features)

feature_importances = model.best_estimator_['classifier'].feature_importances_
# Combine the numerical and one-hot encoded categorical feature names
feature_names = numerical_features + list(model.best_estimator_['preprocessor'].named_transformers_['cat'].named_steps['onehot'].get_feature_names_out(categorical_features))

"""**Display the feature importances in a bar plot**

Define a feature importance DataFrame, then plot it
"""

importance_df = pd.DataFrame({'Feature':feature_names,'Importance':feature_importances}).sort_values(by = 'Importance', ascending = False)
display(importance_df)

plt.figure(figsize=(10, 6))
sns.barplot(x='Importance', y='Feature', data=importance_df)
plt.title('Feature Importances')
plt.xlabel('Importance')
plt.ylabel('Feature')
plt.tight_layout()
plt.show()

test_score = model.score(x_test,y_test)

print(test_score)

"""**Try another model**

In practice you would want to try out different models and even revisit the data analysis to improve your model performance. Maybe you can engineer new features or impute missing values to be able to use more data.

With Scikit-learn's powerful pipeline class, this is easy to do in a few steps. Let's update the pipeline and the parameter grid so we can train a Logistic Regression model and compare the performance of the two models.
"""

# Replace RandomForestClassifier with LogisticRegression
pipeline.set_params(classifier = LogisticRegression(random_state = 42))

# update the model's estimator to use the new pipeline
model.estimator = pipeline

param_grid = { 'classifier__solver': ['liblinear'],
              'classifier__penalty': ['l1','l2'],
               'classifier__class_weight': [None, 'balanced']}

"""classifier__solver:

'liblinear' → A solver (optimization algorithm) for logistic regression, good for small to medium datasets.

Only liblinear supports both L1 and L2 penalties.

classifier__penalty:

'l1' → Lasso regularization (can shrink some coefficients to zero, acts like feature selection).

'l2' → Ridge regularization (shrinks coefficients but keeps all features).

classifier__class_weight:

None → Treats all classes equally (default).

'balanced' → Automatically adjusts weights inversely proportional to class frequencies (helps if dataset is imbalanced).
"""

model.param_grid = param_grid

model.fit(x_train,y_train)

y_pred = model.predict(x_test)

print(classification_report(y_test,y_pred))

"""Exercise 8. Display the confusion matrix for the new model and compare the results to your previous model.

"""

conf_matrix = confusion_matrix(y_test,y_pred)
plt.figure()
sns.heatmap(conf_matrix,annot = True, cmap = 'Blues', fmt = 'd')
plt.title('Titanic Predictions')
plt.xlabel('Predicted')
plt.ylabel('Actual')

plt.tight_layout()
plt.show()

"""**Extract the logistic regression feature coefficients and plot their magnitude in a bar chart.**"""

coefficients = model.best_estimator_.named_steps['classifier'].coef_[0]

numerical_feature_names = numerical_features
categorical_feature_names = model.best_estimator_.named_steps['preprocessor'].named_transformers_['cat'].named_steps['onehot'].get_feature_names_out(categorical_features)

feature_names = numerical_feature_names + list(categorical_feature_names)

"""**Exercise 9. Plot the feature coefficient magnitudes in a bar chart**

What's different about this chart than the feature importance chart for the Random Forest classifier?
"""

importance_df = pd.DataFrame({'Feature': feature_names, 'Coefficients': coefficients}).sort_values(by = 'Coefficients', ascending = False, key = abs)
plt.figure(figsize = (10,6))
plt.barh(importance_df['Feature'],importance_df['Coefficients'].abs(), color = 'skyblue')
plt.gca().invert_yaxis()
#plt.gca() → Get Current Axes

#It gives you the current Axes object (the actual plotting area inside the figure).

#.invert_yaxis() → This reverses the Y-axis direction.

#Normally in Matplotlib, the Y-axis increases upwards.

#After calling this, the Y-axis increases downwards
plt.title('Feature Coefficient magnitudes for Logistic Regression model')
plt.xlabel('Coefficient Magnitude')
plt.show()

test_score = model.best_estimator_.score(x_test,y_test)

print(test_score)